{"version":3,"sources":["welcome.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"welcome.js","sourcesContent":["/*global QRCode*/\n\nvar app = function(){\n    return {\n        init: function () {\n            app.bind_upload_event();\n            app.generate_example_qrode();\n            app.bind_print_qrcode_event();\n        },\n\n        generate_qrcode: function (url) {\n            $('#qrcode').html('');\n            var qrcode = new QRCode('qrcode', {\n                    width: 200,\n                    height: 200\n                }\n            );\n            qrcode.makeCode(url);\n\n            setTimeout(function () {\n                $('#download').attr('href', $('#qrcode img').attr('src'));\n            }, 1000);\n        },\n\n        bind_print_qrcode_event: function () {\n            $('#print').click(function () {\n                $('#qrcode').printArea();\n            });\n        },\n\n        generate_example_qrode: function () {\n            this.generate_qrcode($('#_base_url').val() + '/a1abb3b4a356fb9e555715be7c3dbbd8');\n        },\n\n        bind_upload_event : function () {\n            $('#container').dropzone({\n                url: '/artwork/add',\n                clickable: true,\n                maxFilesize: 20,\n                headers: { 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content') },\n                acceptedFiles: '.jpg,.png,.gif,.jpeg',\n                init: function () {\n                    this.on(\"addedfile\", function (file) {\n                        $('#artimg').attr('src', '');\n                        $('#artimg').hide();\n                        $('.process').show();\n                    });\n\n                    this.on('uploadprogress', function (file, rate) {\n                        $(\".process-rate\").html(Math.floor(rate) + \"%\");\n                    });\n\n                    this.on('error', function (event, errorMessage, xhr) {\n                        $('.process').hide();\n                        $('.process-rate').html(errorMessage);\n                    });\n\n                    this.on('success', function (file, rs) {\n                        if (rs && rs.code == 1) {\n                            $('#artimg').attr('src', rs.url);\n\n                            $(\".process-rate\").html(\"\");\n                            $('#artimg').show();\n\n                            app.generate_qrcode(rs.qrurl);\n                        } else {\n                            var error_message = 'Upload Failed!';\n\n                            if (rs && rs.code == 9) {\n                                app.generate_qrcode(rs.qrurl);\n                                error_message = 'File already exist! Scan the QR Code to check!';\n                            }\n\n                            $('.process-rate').html(error_message);\n                        }\n\n                        $('.process').hide();\n                    });\n                }\n\n            });\n        }\n    }\n\n}();\n\napp.init();"],"sourceRoot":"/source/"}