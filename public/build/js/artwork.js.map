{"version":3,"sources":["artwork.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"artwork.js","sourcesContent":["var app = function(){\n    var global_like_history = \"\";\n\n    return {\n        init : function(){\n            if(!app.checkLikeHistory())\n                app.bind_like_action();\n\n            app.show_banner();\n        },\n\n        show_banner: function(){\n            $(\".banner\").fadeIn(2000);\n        },\n\n        checkLikeHistory: function(){\n            global_like_history = Cookies.get('like_history');\n            if(global_like_history)\n            {\n                var current_artwork_md5 = $(\"#artwork\").attr(\"data-md5\");\n                if(global_like_history.indexOf(current_artwork_md5) > -1)\n                {\n                    $(\"#icon-like\").hide();\n                    $(\"#icon-like-f\").show();\n\n                    if($(\"#like-count\").html() == '0')\n                        $(\"#like-count\").html('1');\n\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        addLikeToHistory: function(artwork_md5){\n            Cookies.set(\"like_history\", global_like_history + ',' + artwork_md5);\n        },\n\n        bind_like_action: function(){\n            $(\"#icon-like\").click(function(){\n                $(\"#icon-like\").hide();\n                $(\"#icon-like-f\").show();\n\n                var count = $(\"#like-count\").html();\n                $(\"#like-count\").html(parseInt(count)+1);\n\n                $.ajax({\n                    method: \"POST\",\n                    url: \"/artwork/like/\"+$(\"#artwork\").attr(\"data-md5\"),\n                    headers: {\n                        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                    },\n                    success: function(data, status, xhr){\n                        if(data && data.code == 1)\n                        {\n                            app.addLikeToHistory($(\"#artwork\").attr(\"data-md5\"));\n                        }else\n                        {\n                            alert(\"like\");\n                        }\n                    }\n                });\n            });\n        }\n    }\n}();\n\napp.init();"],"sourceRoot":"/source/"}